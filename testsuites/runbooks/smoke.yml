name: chisong v3 development
extension:
  paths:
    - ../../testsuites/basic
variable:
  - file: secret.yml
    isSecret: true
  # - file: variable.yml
  - name: location
    value: eastus2
  - name: tipCluster
    value: ""
  - name: tipId
    value: ""
environment:
  warnAsError: false
  allowCreate: false
  environments:
    - nodes:
        - type: requirement
          coreCount:
            min: 2
          azure:
            gallery:
              publisher: $(gPublisher)
              offer: $(gOffer)
              sku: $(gSku)
              version: $(gVersion)
            location: $(location)
platform:
  - type: azure
    adminPrivateKeyFile: $(adminPrivateKeyFile)
    azure:
      servicePrincipalTenantId: $(servicePrincipalTenantId)
      servicePrincipalClientId: $(servicePrincipalClientId)
      servicePrincipalKey: $(servicePrincipalKey)
      subscriptionId: $(subscriptionId)
      waitDelete: true
      availabilitySetTags:
        TipNode.SessionId: $(tipId)
      availabilitySetProperties:
        platformFaultDomainCount: 1
        platformUpdateDomainCount: 1
        internalData:
          pinnedFabricCluster: $(tipCluster)
testcase:
  - criteria:
      priority: 0